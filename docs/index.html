<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Run Code 'With' Temporarily Modified Global State • withr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">withr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="/index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/r-lib/withr#readme">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="withr---run-code-with-modified-state" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#withr---run-code-with-modified-state" class="anchor"></a>Withr - Run Code ‘With’ Modified State</h1></div>

<p>A set of functions to run code ‘with’ safely and temporarily modified global state. There are two sets of functions, those prefixed with <code>with_</code> and those with <code>local_</code>. The former reset their state as soon as the <code>code</code> argument has been evaluated. The latter reset when they reach the end of their scope, usually at the end of a function body.</p>
<p>Many of these functions were originally a part of the <a href="https://github.com/hadley/devtools">devtools</a> package, this provides a simple package with limited dependencies to provide access to these functions.</p>
<ul>
<li>
<code><a href="reference/with_collate.html">with_collate()</a></code> / <code><a href="reference/with_collate.html">local_collate()</a></code> - collation order</li>
<li>
<code><a href="reference/with_dir.html">with_dir()</a></code> / <code><a href="reference/with_dir.html">local_dir()</a></code> - working directory</li>
<li>
<code><a href="reference/with_envvar.html">with_envvar()</a></code> / <code><a href="reference/with_envvar.html">local_envvar()</a></code> - environment variables</li>
<li>
<code><a href="reference/with_libpaths.html">with_libpaths()</a></code> / <code><a href="reference/with_libpaths.html">local_libpaths()</a></code> - library paths</li>
<li>
<code><a href="reference/with_locale.html">with_locale()</a></code> / <code><a href="reference/with_locale.html">local_locale()</a></code> - any locale setting</li>
<li>
<code><a href="reference/with_makevars.html">with_makevars()</a></code> / <code>local_makevars()</code> - Makevars variables</li>
<li>
<code><a href="reference/with_options.html">with_options()</a></code> / <code><a href="reference/with_options.html">local_options()</a></code> - options</li>
<li>
<code><a href="reference/with_par.html">with_par()</a></code> / <code><a href="reference/with_par.html">local_par()</a></code> - graphics parameters</li>
<li>
<code><a href="reference/with_path.html">with_path()</a></code> / <code><a href="reference/with_path.html">local_path()</a></code> - PATH environment variable</li>
</ul>
<p>There are also <code><a href="reference/with_.html">with_()</a></code> and <code><a href="reference/with_.html">local_()</a></code> functions to construct new <code>with_*</code> and <code>local_*</code> functions if needed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dir.create</span>(<span class="st">"test"</span>)
<span class="kw">getwd</span>()
<span class="co">#&gt; [1] "/private/var/folders/dt/r5s12t392tb5sk181j3gs4zw0000gn/T/Rtmp4q2vly"</span>
<span class="kw"><a href="reference/with_dir.html">with_dir</a></span>(<span class="st">"test"</span>, <span class="kw">getwd</span>())
<span class="co">#&gt; [1] "/private/var/folders/dt/r5s12t392tb5sk181j3gs4zw0000gn/T/Rtmp4q2vly/test"</span>
<span class="kw">getwd</span>()
<span class="co">#&gt; [1] "/private/var/folders/dt/r5s12t392tb5sk181j3gs4zw0000gn/T/Rtmp4q2vly"</span>
<span class="kw">unlink</span>(<span class="st">"test"</span>)

<span class="kw">Sys.getenv</span>(<span class="st">"WITHR"</span>)
<span class="co">#&gt; [1] ""</span>
<span class="kw"><a href="reference/with_envvar.html">with_envvar</a></span>(<span class="kw">c</span>(<span class="st">"WITHR"</span> =<span class="st"> </span><span class="dv">2</span>), <span class="kw">Sys.getenv</span>(<span class="st">"WITHR"</span>))
<span class="co">#&gt; [1] "2"</span>
<span class="kw">Sys.getenv</span>(<span class="st">"WITHR"</span>)
<span class="co">#&gt; [1] ""</span>

<span class="kw"><a href="reference/with_envvar.html">with_envvar</a></span>(<span class="kw">c</span>(<span class="st">"A"</span> =<span class="st"> </span><span class="dv">1</span>),
  <span class="kw"><a href="reference/with_envvar.html">with_envvar</a></span>(<span class="kw">c</span>(<span class="st">"A"</span> =<span class="st"> </span><span class="dv">2</span>), <span class="dt">action =</span> <span class="st">"suffix"</span>, <span class="kw">Sys.getenv</span>(<span class="st">"A"</span>))
)
<span class="co">#&gt; [1] "1 2"</span></code></pre></div>
<div id="local-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#local-functions" class="anchor"></a>local functions</h2>
<p>These functions are variants of the corresponding <code><a href="reference/with_.html">with_()</a></code> function, but rather than resetting the value at the end of the function call they reset when the current context goes out of scope. This is most useful for using within functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  <span class="kw"><a href="reference/with_envvar.html">local_envvar</a></span>(<span class="kw">c</span>(<span class="st">"WITHR"</span> =<span class="st"> </span><span class="dv">2</span>))
  <span class="kw">Sys.getenv</span>(<span class="st">"WITHR"</span>)
}
<span class="kw">Sys.getenv</span>(<span class="st">"WITHR"</span>)
<span class="co">#&gt; [1] ""</span></code></pre></div>
</div>
</div>
<div id="see-also" class="section level1">
<h1 class="hasAnchor">
<a href="#see-also" class="anchor"></a>See Also</h1>
<ul>
<li><a href="https://github.com/hadley/devtools">Devtools</a></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=withr">https://​cran.r-project.org/​package=withr</a>
</li>
<li>Browse source code at <br><a href="http://github.com/r-lib/withr#readme">http://​github.com/​r-lib/​withr#readme</a>
</li>
<li>Report a bug at <br><a href="http://github.com/r-lib/withr/issues">http://​github.com/​r-lib/​withr/​issues</a>
</li>
</ul>
<h2>License</h2>
<p>GPL (&gt;= 2)</p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jim Hester <br><small class="roles"> Author, maintainer </small> </li>
<li>Kirill Müller <br><small class="roles"> Author </small> </li>
<li>Kevin Ushey <br><small class="roles"> Author </small> </li>
<li>
<a href="http://hadley.nz">Hadley Wickham</a> <br><small class="roles"> Author </small> </li>
<li>Winston Chang <br><small class="roles"> Author </small> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/r-lib/withr"><img src="https://travis-ci.org/r-lib/withr.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/jimhester/withr"><img src="https://ci.appveyor.com/api/projects/status/github/r-lib/withr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/r-lib/withr?branch=master"><img src="https://codecov.io/gh/r-lib/withr/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="http://www.r-pkg.org/pkg/withr"><img src="http://www.r-pkg.org/badges/version/withr" alt="CRAN Version"></a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Jim Hester, Kirill Müller, Kevin Ushey, <a href="http://hadley.nz">Hadley Wickham</a>, Winston Chang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
